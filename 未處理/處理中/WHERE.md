---
參考資料: 
屬於環節:
  - "[[datastep]]"
  - "[[procedures]]"
---
WHERE，是一種[[SAS敘述句]]，我們可以透過這個敘述句來找到資料集中符合條件的觀測值。
- - -
# 基本語法
```SAS
WHERE 條件;
```
這樣就可以讀入所有滿足條件的觀測值進資料集。
- - -
# IF vs. WHERE
[[IF]]跟[[WHERE]]的差別在於讀取觀測值的方式：
- [[IF]]：先將所有的資料先讀入，再進行條件判斷。
- [[WHERE]]：先檢查資料是否滿足條件後，再讀入滿足條件的觀測值。

如果資料量大的時候，WHERE的效率會比IF高很多。
- - -
# 備註
- WHERE只會針對現行資料集中的變數進行篩選。倘若要以現行資料集之外的變數進行篩選，則會發生找不到變數的錯誤。

例如我們有一個資料集score

| 觀測值 | 平時成績(score1) | 期中成績(score2) | 期末成績<br>(score3) |
| --- | ------------ | ------------ | ---------------- |
| 1   | 100          | 96           | 95               |
| 2   | 70           | 66           | 79               |
| 3   | 80           | 92           | 90               |
| 4   | 100          | 95           | 96               |
| 5   | 80           | 83           | 79               |
| 6   | 10           | 0            | 5                |

```SAS
data average;
	set score;
	average=(score1+score2+score3)/3;
	where average>60;
```
這樣的程式碼會導致average這個變數不能被找到，因為他是在現在的資料集是不存在的。
- - -
# 範例
我們今天有一個資料集score，而變數如下：

| 觀測值 | 學號(id)    | 姓名(name) | 性別(sex) | 平時成績(score1) | 期中成績(score2) | 期末成績<br>(score3) |
| --- | --------- | -------- | ------- | ------------ | ------------ | ---------------- |
| 1   | 123456789 | Ameria   | F       | 100          | 96           | 95               |
| 2   | 123456790 | Gura     | F       | 70           | 66           | 79               |
| 3   | 123456791 | Kuku     | M       | 80           | 92           | 90               |
| 4   | 123456792 | Ina      | F       | 100          | 95           | 96               |
| 5   | 123456793 | Calli    | F       | 80           | 83           | 79               |
| 6   | 123456794 | Jarry    | M       | 10           | 0            | 5                |
而今天我們想要找到資料集中性別為"F"的，所以我們可以用以下的程式碼來達到這個要求：


- - -
parent::[[SAS敘述句]]
sibling::[[IF]]
child::